<div class="canvas-wrapper">
  <!-- Eyedropper hint -->
  @if (eyedropperActive()) {
  <div class="eyedropper-hint">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    >
      <path
        d="M21.17 2.83a2.83 2.83 0 0 0-4 0l-1.41 1.41-3.54-3.54a1 1 0 0 0-1.41 0L9.39 2.12a1 1 0 0 0 0 1.41L12.93 7l-8.1 8.1a2 2 0 0 0-.59 1.42V19a2 2 0 0 0 2 2h2.48a2 2 0 0 0 1.42-.59L18.24 12l3.54 3.54a1 1 0 0 0 1.41 0l1.41-1.41a1 1 0 0 0 0-1.41l-3.54-3.54 1.41-1.41a2.83 2.83 0 0 0 0-4z"
      />
    </svg>
    Clique no PDF para capturar uma cor
  </div>
  }

  <div
    class="canvas-container"
    [style.width.px]="canvasWidth()"
    [style.height.px]="canvasHeight()"
  >
    <canvas #pdfCanvas class="pdf-canvas"></canvas>

    <!-- Annotation Layer -->
    <div
      #annotationLayer
      class="annotation-layer"
      [class.eyedropper-active]="eyedropperActive()"
      [class.eraser-active]="selectedTool() === 'eraser'"
      (mousedown)="onCanvasMouseDown($event)"
      (mousemove)="onEraserCursorMove($event)"
      (mouseleave)="onEraserCursorLeave()"
    >
      @for (annotation of annotations(); track annotation.id) {
      <div
        class="text-annotation"
        [class.selected]="isSelected(annotation)"
        [class.dragging]="isDragging() && isSelected(annotation)"
        [ngStyle]="getAnnotationStyle(annotation)"
        (mousedown)="onAnnotationMouseDown(annotation, $event)"
      >
        {{ annotation.text }}
      </div>
      }

      <!-- Eraser cursor -->
      @if (selectedTool() === 'eraser' && eraserCursorVisible()) {
      <div
        class="eraser-cursor"
        [style.left.px]="eraserCursorX()"
        [style.top.px]="eraserCursorY()"
        [style.width.px]="eraserSize()"
        [style.height.px]="eraserSize()"
      ></div>
      }
    </div>
  </div>
</div>
